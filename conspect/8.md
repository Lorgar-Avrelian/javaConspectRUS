# 8 Базы данных

> [[_оглавление_]](../README.md/#8-базы-данных)

Одна из основных целей языка программирования - хранение и обработка информации.  
Архитектурно хранение данных делится на слои:

- _Data Tier_ (Слой данных) - это уровень хранения самих данных (например, _SQL_-база данных);
- _Persistence Layer_ - это некоторый уровень абстракции (средств) для работы с данными из хранилища с уровня _Data
  Tier_ (например, шаблон _DAO_, различные _ORM_).

[**База данных**](/conspect/definitions.md/#б) - это совокупность данных, организованных в соответствии с концептуальной
структурой, описывающей характеристики этих данных и взаимоотношения между ними.

Данные в базах данных хранятся в виде таблиц.  
Каждая таблица - это коллекция определённых сущностей.  
У каждой записи сущности в таблице есть уникальный идентификатор.

Наиболее популярной базой данных является [_PostgreSQL_](/conspect/7.md/#73-postgresql).

## 8.1 Persistence Layer

> [[_оглавление_]](../README.md/#81-persistence-layer)

### 8.1.1 JDBC

> [[_оглавление_]](../README.md/#81-persistence-layer)

[**JDBC (Java DataBase Connectivity)**](/conspect/definitions.md/#j) - это соединение с базами данных на Java; стандарт
взаимодействия Java-приложений с различными системами управления базами данных
([**СУБД**](/conspect/definitions.md/#с)), реализованный в виде пакетов `java.sql` и `javax.sql`, входящих в состав
_Java SE_.

Данный стандарт описан спецификацией _JSR 221 JDBC 4.1 API_, основными постулатами которой являются:

- _JDBC API_ предоставляет программный доступ к реляционным базам данных из программ, написанных на Java;
- _JDBC API_ является частью платформы Java и входит поэтому в _Java SE_ и _Java EE_;
- _JDBC API_ представлен двумя пакетами: `java.sql` and `javax.sql`.

![38.png](/pictures/38.png)

База данных является внешним компонентом, которого нет изначально в _Java SE_. Это объясняется просто - существует
огромное количество баз данных и работать можно захотеть с любой. Например, есть _PostgreSQL_, _Oracle_, _MySQL_, _H2_.
Каждая из этих баз данных поставляется отдельной компанией, которые называются поставщиками баз данных. Каждая база
данных написана на каком-то своём языке программирования (не обязательно Java). Чтобы с базой данных можно было работать
из Java приложения поставщик базы данных пишет особый драйвер (_JDBC Driver_), который является своего образа адаптером.
Каждый такой _JDBC_-драйвер — это некоторый артефакт, библиотека, _jar_-файл. Он то и добавляется в качестве зависимости
для проекта.

_JDBC_-драйвер не является базой данных, а является проводником к ней.

[**In memory databases**](/conspect/definitions.md/#i) - это такие базы данных, которые существуют в оперативной памяти
на время жизни приложения.

_In memory databases_, как правило, применяются для тестирования приложений.

### 8.1.2 JPA

> [[_оглавление_]](../README.md/#81-persistence-layer)

[**ORM (Object-Relational Mapping)**](/conspect/definitions.md/#o) - это объектно-реляционное отображение; технология
программирования, которая связывает базы данных с концепциями объектно-ориентированных языков программирования (связь
Java-объектов и записей в БД).

_ORM_ появился как дальнейшее развитие _JDBC_ с целью избавления разработчиков от необходимости писать однотипный и
ненужный "обслуживающий" код (так называемый _Boilerplate code_) для тривиальных операций по сохранению Java-объектов в
БД и наоборот, созданию Java-объектов по данным из БД.

![39.png](/pictures/39.png)

_ORM_ - это по сути концепция о том, что Java-объект можно представить как данные в БД (и наоборот). Она нашла
воплощение в виде спецификации _JPA_.

[**JPA (Java Persistence API)**](/conspect/definitions.md/#j) - это спецификация _API Jakarta EE_, которая предоставляет
возможность сохранять в удобном виде Java-объекты в базе данных.

Одной из самых популярных реализаций _JPA_ является _Hibernate_.